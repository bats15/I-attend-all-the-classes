<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body{
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            width: 100%;
        }
        a{
            margin: 10px;
            text-decoration: none;
            color: black;
            font-size: 1.2rem;
            font-weight: bold;
            padding: 10px;
            border-radius: 5px;
        }
        a:hover{
            background-color: #000;
            color: white;
        }
        h2{
            text-align: center;
        }
        .logout{
            background-color: red;
            color: white;
        }
        .signup{
            background-color: green;
            color: white;
        }
        .login{
            background-color: blue;
            color: white;
        }
    </style>
</head>
<body>
    <a href="/user/analytics" style="position: absolute; top: 20px; right: 40px; background: #333; color: #fff; padding: 10px 18px; border-radius: 6px; text-decoration: none; font-weight: bold;">View Analytics</a>
    <% if (typeof branch !== 'undefined' && typeof year !== 'undefined') { %>
        <h3>Welcome, <%= branch %> <%= year %> Year Student!</h3>
    <% } %>
    <% if (classStatus && classStatus.length > 0) { %>
        <h3>Today's Classes:</h3>
        <% let hasUnfilled = false; %>
        <% classStatus.forEach(function(item) { if (!item.alreadyFilled) hasUnfilled = true; }); %>
        <pre>
    classStatus: <%= JSON.stringify(classStatus) %>
    hasUnfilled: <%= hasUnfilled %>
  </pre>
        <% if (hasUnfilled) { %>
            <form action="/user/attendance" method="POST">
                <ul>
                    <% classStatus.forEach(function(item) { %>
                        <li>
                            <span><%= item.className %></span>
                            <input type="hidden" name="classNames[]" value="<%= item.className %>">
                            <% if (item.alreadyFilled) { %>
                                <span style="color: green; font-weight: bold;">already filled</span>
                            <% } else { %>
                                <label>
                                    <input type="radio" name="attended[<%= item.className %>]" value="yes" required> Yes
                                </label>
                                <label>
                                    <input type="radio" name="attended[<%= item.className %>]" value="no" required> No
                                </label>
                            <% } %>
                        </li>
                    <% }); %>
                </ul>
                <button type="submit">Submit Attendance</button>
            </form>
        <% } else { %>
            <p>Attendance for all classes already filled for today.</p>
        <% } %>
    <% } else { %>
        <p>No classes scheduled for today.</p>
    <% } %>
</body>
</html>